{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, createContext, useContext, useEffect } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport { createHttpLink } from 'apollo-link-http';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-boost\";\nimport ListWrapper from \"../components/MovieRank/ListWrapper\";\nimport Footer from \"../components/common/Footer\";\nimport MainBackground from \"../components/common/MainBackground\";\nimport HoverMenu from \"../components/common/HoverMenu\";\nimport MovieWrapper from \"../components/MovieInfo/MovieWrapper\";\nimport InfoWrap from \"../components/ProjectInfo/InfoWrap\";\nimport PosterPreview from \"../components/PosterPreview/PosterPreview\";\nimport './fonts.css';\nimport './master.css';\nconst client = new ApolloClient({\n  uri: \"http://localhost:3000/graphql\",\n  cache: new InMemoryCache()\n});\nexport const MovieContext = createContext({\n  nDate: null,\n  movieCd: '',\n  movieTitle: '',\n  popupFlag: false,\n  imgLoadIndex: 0,\n  posterViewFlag: false,\n  posterImgUrl: '',\n  goToMovieInfo: () => {},\n  goNextImage: () => {},\n  toggleProjectInfo: () => {},\n  togglePosterView: () => {},\n  changePosterUrl: () => {}\n});\nexport default function Index() {\n  const {\n    0: movieCd,\n    1: setMovieCd\n  } = useState('');\n  const {\n    0: movieTitle,\n    1: setMovieTitle\n  } = useState('');\n  const {\n    0: popupFlag,\n    1: setPopupFlag\n  } = useState(false);\n  const {\n    0: imgLoadIndex,\n    1: setImgLoadIndex\n  } = useState(0);\n  const {\n    0: projectInfoFlag,\n    1: setProjectInfoFlag\n  } = useState(false);\n  const {\n    0: posterViewFlag,\n    1: setPosterViewFlag\n  } = useState(false);\n  const {\n    0: posterImgUrl,\n    1: setPosterImgUrl\n  } = useState('');\n  const {\n    0: posterX,\n    1: setPosterX\n  } = useState(0);\n  const {\n    0: posterY,\n    1: setPosterY\n  } = useState(0);\n  const {\n    0: posterW,\n    1: setPosterW\n  } = useState(0);\n  const {\n    0: posterH,\n    1: setPosterH\n  } = useState(0);\n\n  const goToMovieInfo = _movieCd => {\n    setMovieCd(_movieCd);\n    setPopupFlag(true);\n  };\n\n  const closeMovieInfo = () => {\n    setPopupFlag(false);\n  };\n\n  const goNextImage = () => {\n    setImgLoadIndex(imgLoadIndex + 1);\n  };\n\n  const toggleProjectInfo = () => {\n    setProjectInfoFlag(!projectInfoFlag);\n  };\n\n  const togglePosterView = img => {\n    setPosterViewFlag(!posterViewFlag);\n\n    if (img) {\n      setPosterX(img.x);\n      setPosterY(img.y);\n      setPosterW(img.w);\n      setPosterH(img.h);\n    }\n  };\n\n  const changePosterUrl = url => {\n    setPosterImgUrl(url);\n  };\n\n  const changeMovieTitle = title => {\n    setMovieTitle(title);\n  };\n\n  useEffect(() => {\n    window.addEventListener('keyup', function (e) {\n      e.stopPropagation();\n      const key = e.key;\n\n      if (key === 'Escape') {\n        if (posterViewFlag) {\n          setPosterViewFlag(false);\n        } else {\n          if (popupFlag) {\n            setPopupFlag(false);\n          }\n        }\n      }\n    });\n  }, [movieCd, popupFlag, posterViewFlag]);\n  return __jsx(MovieContext.Provider, {\n    value: {\n      nDate: new Date(),\n      movieCd: movieCd,\n      popupFlag: popupFlag,\n      imgLoadIndex: 0,\n      posterViewFlag: posterViewFlag,\n      posterImgUrl: posterImgUrl,\n      goToMovieInfo: goToMovieInfo,\n      goNextImage: goNextImage,\n      toggleProjectInfo: toggleProjectInfo,\n      togglePosterView: togglePosterView,\n      changePosterUrl: changePosterUrl\n    }\n  }, __jsx(ApolloProvider, {\n    client: client\n  }, __jsx(\"div\", {\n    className: \"jsx-2447798956\" + \" \" + 'container'\n  }, __jsx(MainBackground, null), __jsx(MovieWrapper, {\n    movieCd: movieCd,\n    movieTitle: movieTitle,\n    onChangeMovieTitle: changeMovieTitle,\n    popupFlag: popupFlag,\n    onClosePopup: closeMovieInfo\n  }), __jsx(InfoWrap, {\n    projectInfoFlag: projectInfoFlag,\n    onToggleProjectInfo: toggleProjectInfo\n  }), __jsx(PosterPreview, {\n    posterViewFlag: posterViewFlag,\n    posterImgUrl: posterImgUrl,\n    onTogglePosterPreview: togglePosterView,\n    posterX: posterX,\n    posterY: posterY,\n    posterW: posterW,\n    posterH: posterH\n  }), __jsx(ListWrapper, null), __jsx(Footer, null)), __jsx(_JSXStyle, {\n    id: \"2447798956\"\n  }, [])));\n}","map":null,"metadata":{},"sourceType":"module"}