{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, createContext, useContext, useEffect } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport { createHttpLink } from 'apollo-link-http';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport ApolloClient from \"apollo-boost\";\nimport ListWrapper from \"../components/MovieRank/ListWrapper\";\nimport Footer from \"../components/common/Footer\";\nimport MainBackground from \"../components/common/MainBackground\";\nimport HoverMenu from \"../components/common/HoverMenu\";\nimport MovieWrapper from \"../components/MovieInfo/MovieWrapper\";\nimport InfoWrap from \"../components/ProjectInfo/InfoWrap\";\nimport PosterPreview from \"../components/PosterPreview/PosterPreview\";\nimport './fonts.css';\nimport './master.css';\nvar client = new ApolloClient({\n  uri: \"http://localhost:3000/graphql\",\n  cache: new InMemoryCache()\n});\nexport var MovieContext = createContext({\n  nDate: null,\n  movieCd: '',\n  movieTitle: '',\n  popupFlag: false,\n  imgLoadIndex: 0,\n  posterViewFlag: false,\n  posterImgUrl: '',\n  goToMovieInfo: function goToMovieInfo() {},\n  goNextImage: function goNextImage() {},\n  toggleProjectInfo: function toggleProjectInfo() {},\n  togglePosterView: function togglePosterView() {},\n  changePosterUrl: function changePosterUrl() {}\n});\nexport default function Index() {\n  var _useState = useState(''),\n      movieCd = _useState[0],\n      setMovieCd = _useState[1];\n\n  var _useState2 = useState(''),\n      movieTitle = _useState2[0],\n      setMovieTitle = _useState2[1];\n\n  var _useState3 = useState(false),\n      popupFlag = _useState3[0],\n      setPopupFlag = _useState3[1];\n\n  var _useState4 = useState(0),\n      imgLoadIndex = _useState4[0],\n      setImgLoadIndex = _useState4[1];\n\n  var _useState5 = useState(false),\n      projectInfoFlag = _useState5[0],\n      setProjectInfoFlag = _useState5[1];\n\n  var _useState6 = useState(false),\n      posterViewFlag = _useState6[0],\n      setPosterViewFlag = _useState6[1];\n\n  var _useState7 = useState(''),\n      posterImgUrl = _useState7[0],\n      setPosterImgUrl = _useState7[1];\n\n  var _useState8 = useState(0),\n      posterX = _useState8[0],\n      setPosterX = _useState8[1];\n\n  var _useState9 = useState(0),\n      posterY = _useState9[0],\n      setPosterY = _useState9[1];\n\n  var _useState10 = useState(0),\n      posterW = _useState10[0],\n      setPosterW = _useState10[1];\n\n  var _useState11 = useState(0),\n      posterH = _useState11[0],\n      setPosterH = _useState11[1];\n\n  var goToMovieInfo = function goToMovieInfo(_movieCd) {\n    setMovieCd(_movieCd);\n    setPopupFlag(true);\n  };\n\n  var closeMovieInfo = function closeMovieInfo() {\n    setPopupFlag(false);\n  };\n\n  var goNextImage = function goNextImage() {\n    setImgLoadIndex(imgLoadIndex + 1);\n  };\n\n  var toggleProjectInfo = function toggleProjectInfo() {\n    setProjectInfoFlag(!projectInfoFlag);\n  };\n\n  var togglePosterView = function togglePosterView(img) {\n    setPosterViewFlag(!posterViewFlag);\n\n    if (img) {\n      setPosterX(img.x);\n      setPosterY(img.y);\n      setPosterW(img.w);\n      setPosterH(img.h);\n    }\n  };\n\n  var changePosterUrl = function changePosterUrl(url) {\n    setPosterImgUrl(url);\n  };\n\n  var changeMovieTitle = function changeMovieTitle(title) {\n    setMovieTitle(title);\n  };\n\n  useEffect(function () {\n    window.addEventListener('keyup', function (e) {\n      e.stopPropagation();\n      var key = e.key;\n\n      if (key === 'Escape') {\n        if (posterViewFlag) {\n          setPosterViewFlag(false);\n        } else {\n          if (popupFlag) {\n            setPopupFlag(false);\n          }\n        }\n      }\n    });\n  }, [movieCd, popupFlag, posterViewFlag]);\n  return __jsx(MovieContext.Provider, {\n    value: {\n      nDate: new Date(),\n      movieCd: movieCd,\n      popupFlag: popupFlag,\n      imgLoadIndex: 0,\n      posterViewFlag: posterViewFlag,\n      posterImgUrl: posterImgUrl,\n      goToMovieInfo: goToMovieInfo,\n      goNextImage: goNextImage,\n      toggleProjectInfo: toggleProjectInfo,\n      togglePosterView: togglePosterView,\n      changePosterUrl: changePosterUrl\n    }\n  }, __jsx(ApolloProvider, {\n    client: client\n  }, __jsx(\"div\", {\n    className: \"jsx-2447798956\" + \" \" + 'container'\n  }, __jsx(MainBackground, null), __jsx(MovieWrapper, {\n    movieCd: movieCd,\n    movieTitle: movieTitle,\n    onChangeMovieTitle: changeMovieTitle,\n    popupFlag: popupFlag,\n    onClosePopup: closeMovieInfo\n  }), __jsx(InfoWrap, {\n    projectInfoFlag: projectInfoFlag,\n    onToggleProjectInfo: toggleProjectInfo\n  }), __jsx(PosterPreview, {\n    posterViewFlag: posterViewFlag,\n    posterImgUrl: posterImgUrl,\n    onTogglePosterPreview: togglePosterView,\n    posterX: posterX,\n    posterY: posterY,\n    posterW: posterW,\n    posterH: posterH\n  }), __jsx(ListWrapper, null), __jsx(Footer, null)), __jsx(_JSXStyle, {\n    id: \"2447798956\"\n  }, [])));\n}","map":null,"metadata":{},"sourceType":"module"}